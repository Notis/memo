<!DOCTYPE html>
<html lang="en-US" class="no-js">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="http://youngblog.hoster-ok.com/xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://youngblog.hoster-ok.com/wp-content/themes/twentyfifteen/js/html5.js"></script>
	<![endif]-->
	<script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>Генерация RSA ключей для OpenVPN &#8211; youngblogger на hoster-ok.com</title>
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link href='https://fonts.gstatic.com' crossorigin rel='preconnect' />
<link rel="alternate" type="application/rss+xml" title="youngblogger на hoster-ok.com &raquo; Feed" href="http://youngblog.hoster-ok.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="youngblogger на hoster-ok.com &raquo; Comments Feed" href="http://youngblog.hoster-ok.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="youngblogger на hoster-ok.com &raquo; Генерация RSA ключей для OpenVPN Comments Feed" href="http://youngblog.hoster-ok.com/generatsiya-rsa-klyuchej-dlya-openvpn/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/youngblog.hoster-ok.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.7"}};
			!function(a,b,c){function d(a){var b,c,d,e,f=String.fromCharCode;if(!k||!k.fillText)return!1;switch(k.clearRect(0,0,j.width,j.height),k.textBaseline="top",k.font="600 32px Arial",a){case"flag":return k.fillText(f(55356,56826,55356,56819),0,0),!(j.toDataURL().length<3e3)&&(k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,65039,8205,55356,57096),0,0),b=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55356,57331,55356,57096),0,0),c=j.toDataURL(),b!==c);case"emoji4":return k.fillText(f(55357,56425,55356,57341,8205,55357,56507),0,0),d=j.toDataURL(),k.clearRect(0,0,j.width,j.height),k.fillText(f(55357,56425,55356,57341,55357,56507),0,0),e=j.toDataURL(),d!==e}return!1}function e(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i,j=b.createElement("canvas"),k=j.getContext&&j.getContext("2d");for(i=Array("flag","emoji4"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='cptch_stylesheet-css'  href='http://youngblog.hoster-ok.com/wp-content/plugins/captcha/css/style.css?ver=4.7.7' type='text/css' media='all' />
<link rel='stylesheet' id='dashicons-css'  href='http://youngblog.hoster-ok.com/wp-includes/css/dashicons.min.css?ver=4.7.7' type='text/css' media='all' />
<link rel='stylesheet' id='cptch_desktop_style-css'  href='http://youngblog.hoster-ok.com/wp-content/plugins/captcha/css/desktop_style.css?ver=4.7.7' type='text/css' media='all' />
<link rel='stylesheet' id='contact-form-7-css'  href='http://youngblog.hoster-ok.com/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=4.6' type='text/css' media='all' />
<link rel='stylesheet' id='quotescollection-css'  href='http://youngblog.hoster-ok.com/wp-content/plugins/quotes-collection/css/quotes-collection.css?ver=2.0.8' type='text/css' media='all' />
<link rel='stylesheet' id='twentyfifteen-fonts-css'  href='https://fonts.googleapis.com/css?family=Noto+Sans%3A400italic%2C700italic%2C400%2C700%7CNoto+Serif%3A400italic%2C700italic%2C400%2C700%7CInconsolata%3A400%2C700&#038;subset=latin%2Clatin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='genericons-css'  href='http://youngblog.hoster-ok.com/wp-content/themes/twentyfifteen/genericons/genericons.css?ver=3.2' type='text/css' media='all' />
<link rel='stylesheet' id='twentyfifteen-style-css'  href='http://youngblog.hoster-ok.com/wp-content/themes/twentyfifteen-child/style.css?ver=4.7.7' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentyfifteen-ie-css'  href='http://youngblog.hoster-ok.com/wp-content/themes/twentyfifteen/css/ie.css?ver=20141010' type='text/css' media='all' />
<![endif]-->
<!--[if lt IE 8]>
<link rel='stylesheet' id='twentyfifteen-ie7-css'  href='http://youngblog.hoster-ok.com/wp-content/themes/twentyfifteen/css/ie7.css?ver=20141010' type='text/css' media='all' />
<![endif]-->
<!-- This site uses the Google Analytics by MonsterInsights plugin v5.5.4 - Universal disabled - https://www.monsterinsights.com/ -->
<script type="text/javascript">

	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-16377985-1']);
	_gaq.push(['_gat._forceSSL']);
	_gaq.push(['_trackPageview']);

	(function () {
		var ga = document.createElement('script');
		ga.type = 'text/javascript';
		ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(ga, s);
	})();

</script>
<!-- / Google Analytics by MonsterInsights -->
<script type='text/javascript' src='http://youngblog.hoster-ok.com/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://youngblog.hoster-ok.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var cptch_vars = {"nonce":"20be6153ab","ajaxurl":"https:\/\/youngblog.hoster-ok.com\/wp-admin\/admin-ajax.php","enlarge":"0"};
/* ]]> */
</script>
<script type='text/javascript' src='http://youngblog.hoster-ok.com/wp-content/plugins/captcha/js/front_end_script.js?ver=4.7.7'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var quotescollectionAjax = {"ajaxUrl":"https:\/\/youngblog.hoster-ok.com\/wp-admin\/admin-ajax.php","nonce":"2e33abe795","nextQuote":"Next quote \u00bb","loading":"Loading...","error":"Error getting quote","autoRefreshMax":"20","autoRefreshCount":"0"};
/* ]]> */
</script>
<script type='text/javascript' src='http://youngblog.hoster-ok.com/wp-content/plugins/quotes-collection/js/quotes-collection.js?ver=2.0.8'></script>
<link rel='https://api.w.org/' href='http://youngblog.hoster-ok.com/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://youngblog.hoster-ok.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://youngblog.hoster-ok.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Bacula проблема запуска под Winows' href='http://youngblog.hoster-ok.com/bacula-problema-zapuska-pod-winows/' />
<link rel='next' title='Как сбросить RouterBoard RB250GS, RB750/750G к заводским настройкам.' href='http://youngblog.hoster-ok.com/kak-sbrosit-routerboard-rb250gs-rb750-750g-k-zavodskim-nastrojkam/' />
<meta name="generator" content="WordPress 4.7.7" />
<link rel="canonical" href="http://youngblog.hoster-ok.com/generatsiya-rsa-klyuchej-dlya-openvpn/" />
<link rel='shortlink' href='http://youngblog.hoster-ok.com/?p=1703' />
<link rel="alternate" type="application/json+oembed" href="http://youngblog.hoster-ok.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fyoungblog.hoster-ok.com%2Fgeneratsiya-rsa-klyuchej-dlya-openvpn%2F" />
<link rel="alternate" type="text/xml+oembed" href="http://youngblog.hoster-ok.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fyoungblog.hoster-ok.com%2Fgeneratsiya-rsa-klyuchej-dlya-openvpn%2F&#038;format=xml" />
<!-- <meta name="NextGEN" version="2.1.62" /> -->
<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body class="post-template-default single single-post postid-1703 single-format-standard">
<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	<div id="sidebar" class="sidebar">
		<header id="masthead" class="site-header" role="banner">
			<div class="site-branding">
										<p class="site-title"><a href="http://youngblog.hoster-ok.com/" rel="home">youngblogger на hoster-ok.com</a></p>
											<p class="site-description">Не сомневайся! Просто сделай это!</p>
									<button class="secondary-toggle">Menu and widgets</button>
			</div><!-- .site-branding -->
		</header><!-- .site-header -->

			<div id="secondary" class="secondary">

		
		
					<div id="widget-area" class="widget-area" role="complementary">
				<aside id="search-3" class="widget widget_search"><h2 class="widget-title">Поиск по сайту</h2><form role="search" method="get" class="search-form" action="http://youngblog.hoster-ok.com/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit screen-reader-text" value="Search" />
			</form></aside><aside id="categories-3" class="widget widget_categories"><h2 class="widget-title">Категории</h2>		<ul>
	<li class="cat-item cat-item-69"><a href="http://youngblog.hoster-ok.com/category/hardware/adsl-vdsl-modems/" >ADSL/VDSL модемы</a>
</li>
	<li class="cat-item cat-item-268"><a href="http://youngblog.hoster-ok.com/category/os/linux/bash/" >bash</a>
</li>
	<li class="cat-item cat-item-276"><a href="http://youngblog.hoster-ok.com/category/programs/web/cms/" >CMS</a>
</li>
	<li class="cat-item cat-item-168"><a href="http://youngblog.hoster-ok.com/category/hardware/hdd-ssd/" >HDD/SSD</a>
</li>
	<li class="cat-item cat-item-4"><a href="http://youngblog.hoster-ok.com/category/os/linux/" title="Мои записи касаемо операционной системы Linux">Linux</a>
</li>
	<li class="cat-item cat-item-304"><a href="http://youngblog.hoster-ok.com/category/os/macos/" >MacOS</a>
</li>
	<li class="cat-item cat-item-384"><a href="http://youngblog.hoster-ok.com/category/os/linux/scripts/" >Scripts</a>
</li>
	<li class="cat-item cat-item-161"><a href="http://youngblog.hoster-ok.com/category/security/vpn/" >VPN</a>
</li>
	<li class="cat-item cat-item-13"><a href="http://youngblog.hoster-ok.com/category/programs/web/" >Web</a>
</li>
	<li class="cat-item cat-item-5"><a href="http://youngblog.hoster-ok.com/category/os/windows/" title="Мои записи касаемо операционной системы Windows">Windows</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://youngblog.hoster-ok.com/category/uncategorized/" >Без рубрики</a>
</li>
	<li class="cat-item cat-item-6"><a href="http://youngblog.hoster-ok.com/category/security/" title="Записи касаемо безопасности работы на компьютерах. Безопасности как в информационном плане, так и в плане физического и психического состояния и здоровья.
&quot;Безопасность - это процесс, а не результат&quot; 
- Брюс Шнайер.">Безопасность</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://youngblog.hoster-ok.com/category/os/virtualization/" >Виртуализация</a>
</li>
	<li class="cat-item cat-item-229"><a href="http://youngblog.hoster-ok.com/category/os/windows/virusy/" >Вирусы</a>
</li>
	<li class="cat-item cat-item-187"><a href="http://youngblog.hoster-ok.com/category/hardware/embedded-linux/" >Встраиваемый Linux</a>
</li>
	<li class="cat-item cat-item-183"><a href="http://youngblog.hoster-ok.com/category/programs/software/grafika/" >Графика</a>
</li>
	<li class="cat-item cat-item-244"><a href="http://youngblog.hoster-ok.com/category/informatsiya/" >Информация</a>
</li>
	<li class="cat-item cat-item-137"><a href="http://youngblog.hoster-ok.com/category/os/linux/komandy/" >команды</a>
</li>
	<li class="cat-item cat-item-68"><a href="http://youngblog.hoster-ok.com/category/hardware/controllers/" >Контроллеры</a>
</li>
	<li class="cat-item cat-item-258"><a href="http://youngblog.hoster-ok.com/category/hardware/monitoring-hardware/" >мониторинг</a>
</li>
	<li class="cat-item cat-item-10"><a href="http://youngblog.hoster-ok.com/category/thought/" >Мысли</a>
</li>
	<li class="cat-item cat-item-71"><a href="http://youngblog.hoster-ok.com/category/hardware/notebooks/" >Ноутбуки</a>
</li>
	<li class="cat-item cat-item-18"><a href="http://youngblog.hoster-ok.com/category/hardware/" >Оборудование</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://youngblog.hoster-ok.com/category/os/" title="Всё что касается персональных компьютеров">Операционные системы</a>
</li>
	<li class="cat-item cat-item-49"><a href="http://youngblog.hoster-ok.com/category/search-engine-systems/" >Поисковые системы</a>
</li>
	<li class="cat-item cat-item-8"><a href="http://youngblog.hoster-ok.com/category/programs/software/" >Прикладное ПО</a>
</li>
	<li class="cat-item cat-item-7"><a href="http://youngblog.hoster-ok.com/category/programs/" >Программное обеспечение</a>
</li>
	<li class="cat-item cat-item-94"><a href="http://youngblog.hoster-ok.com/category/prochee/" >Прочее</a>
</li>
	<li class="cat-item cat-item-19"><a href="http://youngblog.hoster-ok.com/category/hardware/servers/" >Серверы</a>
</li>
	<li class="cat-item cat-item-119"><a href="http://youngblog.hoster-ok.com/category/seti/" >Сети</a>
</li>
	<li class="cat-item cat-item-99"><a href="http://youngblog.hoster-ok.com/category/programs/sistemnoe-po/" >Системное ПО</a>
</li>
	<li class="cat-item cat-item-184"><a href="http://youngblog.hoster-ok.com/category/hardware/smartphones/" >Смартфоны</a>
</li>
	<li class="cat-item cat-item-376"><a href="http://youngblog.hoster-ok.com/category/programs/software/sredstva-razrabotki/" >Средства разработки</a>
</li>
	<li class="cat-item cat-item-163"><a href="http://youngblog.hoster-ok.com/category/hardware/udalyonnoe-upravlenie/" >Удалённое управление</a>
</li>
	<li class="cat-item cat-item-9"><a href="http://youngblog.hoster-ok.com/category/os/windows/utilities/" >Утилиты</a>
</li>
	<li class="cat-item cat-item-11"><a href="http://youngblog.hoster-ok.com/category/security/cryptography/" >шифрование</a>
</li>
	<li class="cat-item cat-item-47"><a href="http://youngblog.hoster-ok.com/category/humor/" >Юмор</a>
</li>
		</ul>
</aside><aside id="pages-3" class="widget widget_pages"><h2 class="widget-title">Страницы</h2>		<ul>
			<li class="page_item page-item-265 page_item_has_children"><a href="http://youngblog.hoster-ok.com/programmy/">Программы</a>
<ul class='children'>
	<li class="page_item page-item-2088"><a href="http://youngblog.hoster-ok.com/programmy/cms/">CMS</a></li>
</ul>
</li>
<li class="page_item page-item-3294"><a href="http://youngblog.hoster-ok.com/kontakt/">Контакт</a></li>
<li class="page_item page-item-2"><a href="http://youngblog.hoster-ok.com/about/">О блоге</a></li>
		</ul>
		</aside>		<aside id="recent-posts-3" class="widget widget_recent_entries">		<h2 class="widget-title">Недавние записи</h2>		<ul>
					<li>
				<a href="http://youngblog.hoster-ok.com/carbon-graphite-izmenenie-vremeni-hraneniya-dannyh/">Carbon Graphite изменение времени хранения данных</a>
						</li>
					<li>
				<a href="http://youngblog.hoster-ok.com/kak-poluchit-vse-ip-adresa-incapsula-com/">Как получить все IP адреса incapsula.com</a>
						</li>
					<li>
				<a href="http://youngblog.hoster-ok.com/kak-poluchit-vse-ip-adresa-coudflare/">Как получить все IP адреса CoudFlare</a>
						</li>
					<li>
				<a href="http://youngblog.hoster-ok.com/otklyuchenie-wpa_supplicant-na-vds-ili-desktope-gde-net-wifi/">Отключение wpa_supplicant на VDS или десктопе где нет WiFi</a>
						</li>
					<li>
				<a href="http://youngblog.hoster-ok.com/iptables-v-rhel-7-centos-7/">iptables в RHEL 7 / Centos 7</a>
						</li>
				</ul>
		</aside>					</div><!-- .widget-area -->
		
	</div><!-- .secondary -->

	</div><!-- .sidebar -->

	<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
<article id="post-1703" class="post-1703 post type-post status-publish format-standard hentry category-linux category-sistemnoe-po category-cryptography tag-easy-rsa tag-openvpn tag-openvpn-keys tag-rsa tag-security-2 tag-vpn">
	
	<header class="entry-header">
		<h1 class="entry-title">Генерация RSA ключей для OpenVPN</h1>	</header><!-- .entry-header -->

	<div class="entry-content">
		<p><img class="size-full wp-image-1731 alignright" style="border: 1px solid grey; margin: 5px;" title="RSA" src="http://youngblog.hoster-ok.com/wp-content/uploads/2011/08/RSA.jpg" alt="" width="113" height="78" /><br />
Генерация RSA ключей для OpenVPN выполняется в несколько простых шагов.</p>
<p>Но прежде чем перейти к генерации ключей нам потребуется определиться с некоторыми моментами.<br />
Нам нужны?</p>
<ul>
<li> название CA ключа</li>
<li> название ключа сервера</li>
<li> название ключей клиентов</li>
<li> название организации (опционально)</li>
<li> e-mail (опционально)</li>
</ul>
<p>При генерации клиентских ключей важно понять, что ключ клиента может быть либо &#8220;персональным&#8221; либо &#8220;совместным&#8221; одним на нескольких клиентов и даже одним на всех клиентов.<br />
<span id="more-1703"></span><br />
Вариант использования клиентского ключа определяется одной опцией в конфигурационном файле на OpenVPN сервере. Опция на сервере позволяет запретить или разрешить соединение с сервером если клиент с таким ключём уже соединился с сервером. </p>
<p>Чтобы выбрать вариант использования клиентского ключа нужно исходить из требований к VPN соединению. Выбирая какое количество ключей вам необходимо нужно помнить, что ключ привязаный к одному единственному клиенту даёт серверу возможность однозначно идентифицировать клиента и тем самым выдавать ему уникальный статический IP адрес, а также принимать и публиковать маршруты клиента. Публикация маршрутов клиента важна в том случае, когда вы хотите сделать доступными между собой разные сети соединённые через разные OpenVPN клиенты. Чтобы клиент из одной сети мог получить доступ к ресурсам из другой сети. С другой стороны &#8220;разделяемый&#8221; клиентский ключ при большом количестве клиентов порождает одну проблему. Предположим вы администрируете корпоративную VPN сеть. Один из сотрудников компании уволился и вам необходимо заблокировать ему доступ к корпоративной VPN сети. Для этого существует процедура отзыва ключа, которая даёт серверу информацию о том, что данный ключ перестал быть доверенным и соединения с таким клиентом устанавливать запрещено. Но &#8220;отозвав&#8221; один ключ вы одновременно заблокируете доступ всем VPN клиентам которые используют этот ключ. А если таких клиентов не один десяток то обновление ключей на всех клиентах превращается в проблему. Поэтому в случае больших сетей лучше выдавать &#8220;персональные&#8221; клиентские ключи.</p>
<p>Для управления сертификатами в поставке OpenVPN идут простые в использовании скрипты которые позволяют выполнить хитрые манипуляции с непонятными программами и их параметрами. Но прежде всего необходимо настроить эти скрипты.</p>
<p>Речь пойдёт о Linux конкретно Red Hat Fedora. У Fedora эти скрипты расположены в каталоге /usr/share/openvpn/easy-rsa/2.0/<br />
Эти скрипты я обычно копирую в домашний каталог /home/user001/openvpn-easy-rsa/ и там манипулирую со скриптами.<br />
Во первых, для генерации ключей не нужны права админа. Во вторых, для безопасности полученные приватные ключи нельзя показывать никому, а в родном каталоге они будут видны всем пользователям той машины где их генерировали. В третьих, я люблю чтобы всё было в рабочих каталогах.</p>
<p>Если кому-то не хочется вникать в описания команд, в самом конце страницы есть краткий список команд для генерации ключей. Настраивайте файлик vars и в путь.</p>
<h2>Настройка скриптов</h2>
<p>Откройте файл vars и измените следующие поля как вам нравится. Но они не могут быть пустыми. Так написано в документации :)</p>
<pre class="brush: bash; title: ; notranslate" title="">export KEY_SIZE=2048

export KEY_COUNTRY=&quot;CZ&quot;
export KEY_PROVINCE=&quot;none&quot;
export KEY_CITY=&quot;Praha&quot;
export KEY_ORG=&quot;Moja organizatsija&quot;
export KEY_EMAIL=&quot;ja@vse.chto.khotite&quot;</pre>
<p>Ограничение на длинну поля KEY_EMAIL &#8211; 40 символов.<br />
на поле KEY_COUNTRY &#8211; 2 символа</p>
<p><strong>ВАЖНО</strong><br />
Обратите внимание, если у вас отсутствует подкаталог keys или он пустой, без каких либо файлов (если вы ключи ещё не генерировали) то обязательно выполнение скрипла ./clean-all<br />
Он делает два действия</p>
<ul>
<li>Удаляет все из этого каталога. Осторожно! Он не спрашивает подтверждения</li>
<li>Создаёт в этом подкаталоге два файла<br />
  keys/index.txt &#8211; пустой<br />
  keys/serial &#8211; которые содержит одну строку 01 это будет серийный номер первого подписанного ключа.
</li>
</ul>
<p>Без этого при генерации серверных и клиентских ключей вы получите ошибки:</p>
<pre class="brush: bash; title: ; notranslate" title="">Using configuration from /home/user001/openvpn-easy-rsa/openssl.cnf
/home/user001/openvpn-easy-rsa/keys/index.txt: No such file or directory
unable to open '/home/user001/openvpn-easy-rsa/keys/index.txt'
3078002396:error:02001002:system library:fopen:No such file or directory:bss_file.c:398:fopen('/home/user001/openvpn-easy-rsa/keys/index.txt','r')
3078002396:error:20074002:BIO routines:FILE_CTRL:system lib:bss_file.c:400:</pre>
<p>или</p>
<pre class="brush: bash; title: ; notranslate" title="">Using configuration from /home/user001/openvpn-easy-rsa/openssl.cnf
/home/user001/openvpn-easy-rsa/keys/serial: No such file or directory
error while loading serial number
3078276828:error:02001002:system library:fopen:No such file or directory:bss_file.c:398:fopen('/home/user001/openvpn-easy-rsa/keys/serial','r')
3078276828:error:20074002:BIO routines:FILE_CTRL:system lib:bss_file.c:400:</pre>
<h2>Генерация своего Certification Authoriry</h2>
<p>Генерация своего собственного Certification Authoriry сокращённо (CA) выполняется при помощи скрипта build-ca.</p>
<p>Хочу предупредить, что не стоит запускать эти скрипты из под mc (Midnight Commander) потому что переменные из скрипта vars потеряются к запуску следующего скрипта. Запускайте всё из чистого shell. </p>
<pre class="brush: bash; title: ; notranslate" title="">[user001@m750 openvpn-easy-rsa]$ . ./vars
NOTE: If you run ./clean-all, I will be doing a rm -rf on /home/user001/openvpn-easy-rsa/keys
[user001@m750 openvpn-easy-rsa]$ ./build-ca my-personal-ca
Generating a 2048 bit RSA private key
..................................................................+++
......+++
writing new private key to 'ca.key'
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [CZ]:
State or Province Name (full name) [none]:
Locality Name (eg, city) [Praha]:
Organization Name (eg, company) [Moja organizatsija]:
Organizational Unit Name (eg, section) []:
Common Name (eg, your name or your server's hostname) [my-personal-ca]:
Name []:
Email Address [ja@vse.chto.khotite]:
</pre>
<h2>Генерация ключа сервера и подписание его своим CA</h2>
<pre class="brush: bash; title: ; notranslate" title="">[user001@m750 openvpn-easy-rsa]$ ./build-key-server my-personal-vpn-server
Generating a 2048 bit RSA private key
...........................................+++
.+++
writing new private key to 'my-personal-vpn-server.key'
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [CZ]:
State or Province Name (full name) [none]:
Locality Name (eg, city) [Praha]:
Organization Name (eg, company) [Moja organizatsija]:
Organizational Unit Name (eg, section) []:
Common Name (eg, your name or your server's hostname) [my-personal-vpn-server]:
Name []:
Email Address [ja@vse.chto.khotite]:

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
Using configuration from /home/user001/openvpn-easy-rsa/openssl.cnf
Check that the request matches the signature
Signature ok
The Subject's Distinguished Name is as follows
countryName           :PRINTABLE:'CZ'
stateOrProvinceName   :PRINTABLE:'none'
localityName          :PRINTABLE:'Praha'
organizationName      :PRINTABLE:'Moja organizatsija'
commonName            :PRINTABLE:'my-personal-vpn-server'
emailAddress          :IA5STRING:'ja@vse.chto.khotite'
Certificate is to be certified until Aug 16 15:27:29 2021 GMT (3650 days)
Sign the certificate? [y/n]:y
1 out of 1 certificate requests certified, commit? [y/n]y
Write out database with 1 new entries
Data Base Updated
</pre>
<h2>Ключ Diffie Hellman</h2>
<p>Diffie Hellman ключ служит для обмена ключами между клиентом и сервером. Он ни от чего не зависит генерируется совершенно автономно, из конфигов использует только путь к выходной папке и длину ключа.</p>
<p>По причине того что я установил размер ключа 2048 бит генерация Diffie Hellman ключа будет идти долго.</p>
<pre class="brush: bash; title: ; notranslate" title="">[user001@m750 openvpn-easy-rsa]$ ./build-dh 
Generating DH parameters, 2048 bit long safe prime, generator 2
This is going to take a long time
.........................+......................................................
............+...................................................................
...............................................+................+...............
......................+...........+............+................................
......+....+....................................................................
................................................................................
................................................................................
........................................................................+.......
..................................................+.......+.....................
......+.........................................................................
................................................................................
..........................................................+.....................
.....................................+..........................................
...................................+............................................
................................................................................
.............................................++*++*</pre>
<p>Я не стал цитировать полный экран так как в этом мало смысла.</p>
<h2>Генерация необходимого количества ключей для клиентов.</h2>
<p>Мне требуется 3 ключа для 3-х VPN клиентов. Действие повторю 3 раза меняя только имя передаваемое скрипту</p>
<pre class="brush: bash; title: ; notranslate" title="">[user001@m750 openvpn-easy-rsa]$ ./build-key my-personal-vpn-client1
Generating a 2048 bit RSA private key
................................................................................
...............................................................................+
++........................+++
writing new private key to 'my-personal-vpn-client1.key'
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [CZ]:
State or Province Name (full name) [none]:
Locality Name (eg, city) [Praha]:
Organization Name (eg, company) [Moja organizatsija]:
Organizational Unit Name (eg, section) []:
Common Name (eg, your name or your server's hostname) [my-personal-vpn-client1]:
Name []:
Email Address [ja@vse.chto.khotite]:

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
Using configuration from /home/user001/openvpn-easy-rsa/openssl.cnf
Check that the request matches the signature
Signature ok
The Subject's Distinguished Name is as follows
countryName           :PRINTABLE:'CZ'
stateOrProvinceName   :PRINTABLE:'none'
localityName          :PRINTABLE:'Praha'
organizationName      :PRINTABLE:'Moja organizatsija'
commonName            :PRINTABLE:'my-personal-vpn-client1'
emailAddress          :IA5STRING:'ja@vse.chto.khotite'
Certificate is to be certified until Aug 16 15:54:18 2021 GMT (3650 days)
Sign the certificate? [y/n]:y


1 out of 1 certificate requests certified, commit? [y/n]y
Write out database with 1 new entries
Data Base Updated
[user001@m750 openvpn-easy-rsa]$ ./build-key my-personal-vpn-client2
Generating a 2048 bit RSA private key
............+++
........+++
writing new private key to 'my-personal-vpn-client2.key'
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [CZ]:
State or Province Name (full name) [none]:
Locality Name (eg, city) [Praha]:
Organization Name (eg, company) [Moja organizatsija]:
Organizational Unit Name (eg, section) []:
Common Name (eg, your name or your server's hostname) [my-personal-vpn-client2]:
Name []:
Email Address [ja@vse.chto.khotite]:

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
Using configuration from /home/user001/openvpn-easy-rsa/openssl.cnf
Check that the request matches the signature
Signature ok
The Subject's Distinguished Name is as follows
countryName           :PRINTABLE:'CZ'
stateOrProvinceName   :PRINTABLE:'none'
localityName          :PRINTABLE:'Praha'
organizationName      :PRINTABLE:'Moja organizatsija'
commonName            :PRINTABLE:'my-personal-vpn-client2'
emailAddress          :IA5STRING:'ja@vse.chto.khotite'
Certificate is to be certified until Aug 16 15:54:49 2021 GMT (3650 days)
Sign the certificate? [y/n]:y


1 out of 1 certificate requests certified, commit? [y/n]y
Write out database with 1 new entries
Data Base Updated
[user001@m750 openvpn-easy-rsa]$ ./build-key my-personal-vpn-client3
Generating a 2048 bit RSA private key
.......+++
...+++
writing new private key to 'my-personal-vpn-client3.key'
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [CZ]:
State or Province Name (full name) [none]:
Locality Name (eg, city) [Praha]:
Organization Name (eg, company) [Moja organizatsija]:
Organizational Unit Name (eg, section) []:
Common Name (eg, your name or your server's hostname) [my-personal-vpn-client3]:
Name []:
Email Address [ja@vse.chto.khotite]:

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:
An optional company name []:
Using configuration from /home/user001/openvpn-easy-rsa/openssl.cnf
Check that the request matches the signature
Signature ok
The Subject's Distinguished Name is as follows
countryName           :PRINTABLE:'CZ'
stateOrProvinceName   :PRINTABLE:'none'
localityName          :PRINTABLE:'Praha'
organizationName      :PRINTABLE:'Moja organizatsija'
commonName            :PRINTABLE:'my-personal-vpn-client3'
emailAddress          :IA5STRING:'ja@vse.chto.khotite'
Certificate is to be certified until Aug 16 15:54:58 2021 GMT (3650 days)
Sign the certificate? [y/n]:y


1 out of 1 certificate requests certified, commit? [y/n]y
Write out database with 1 new entries
Data Base Updated</pre>
<p>И напоследок сделаем последний ключик для сервера и клиента. Он не обязателен, но его назначение предотвращать<br />
перейдём в каталог с ключами и запустим такую команду (машина где она запускается должна иметь установленный openvpn</p>
<pre class="brush: bash; title: ; notranslate" title="">[user001@m750 keys]$ openvpn --genkey --secret ta.key</pre>
<h2>Выбираем файлы которые нужно скопировать на сервер, а какие на клиентов</h2>
<p>Итак ключи сгенерированы. После генерации TA ключа мы остались в каталоге keys.</p>
<pre class="brush: bash; title: ; notranslate" title="">[user001@m750 keys]$ ls -l
total 136
-rw-rw-r--. 1 user001 user001 5348 Aug 19 17:27 01.pem
-rw-rw-r--. 1 user001 user001 5231 Aug 19 17:54 02.pem
-rw-rw-r--. 1 user001 user001 5231 Aug 19 17:54 03.pem
-rw-rw-r--. 1 user001 user001 5231 Aug 19 17:55 04.pem
-rw-rw-r--. 1 user001 user001 1623 Aug 19 17:09 ca.crt
-rw-------. 1 user001 user001 1704 Aug 19 17:09 ca.key
-rw-rw-r--. 1 user001 user001  424 Aug 19 18:40 dh2048.pem
-rw-rw-r--. 1 user001 user001  523 Aug 19 17:55 index.txt
-rw-rw-r--. 1 user001 user001   21 Aug 19 17:55 index.txt.attr
-rw-rw-r--. 1 user001 user001   21 Aug 19 17:54 index.txt.attr.old
-rw-rw-r--. 1 user001 user001  392 Aug 19 17:54 index.txt.old
-rw-rw-r--. 1 user001 user001 5231 Aug 19 17:54 my-personal-vpn-client1.crt
-rw-rw-r--. 1 user001 user001 1058 Aug 19 17:54 my-personal-vpn-client1.csr
-rw-------. 1 user001 user001 1708 Aug 19 17:54 my-personal-vpn-client1.key
-rw-rw-r--. 1 user001 user001 5231 Aug 19 17:54 my-personal-vpn-client2.crt
-rw-rw-r--. 1 user001 user001 1058 Aug 19 17:54 my-personal-vpn-client2.csr
-rw-------. 1 user001 user001 1704 Aug 19 17:54 my-personal-vpn-client2.key
-rw-rw-r--. 1 user001 user001 5231 Aug 19 17:55 my-personal-vpn-client3.crt
-rw-rw-r--. 1 user001 user001 1058 Aug 19 17:54 my-personal-vpn-client3.csr
-rw-------. 1 user001 user001 1708 Aug 19 17:54 my-personal-vpn-client3.key
-rw-rw-r--. 1 user001 user001 5348 Aug 19 17:27 my-personal-vpn-server.crt
-rw-rw-r--. 1 user001 user001 1058 Aug 19 17:27 my-personal-vpn-server.csr
-rw-------. 1 user001 user001 1704 Aug 19 17:27 my-personal-vpn-server.key
-rw-rw-r--. 1 user001 user001    3 Aug 19 17:55 serial
-rw-rw-r--. 1 user001 user001    3 Aug 19 17:54 serial.old
-rw-------. 1 user001 user001  636 Aug 19 18:41 ta.key</pre>
<p>Ой! У неискушённого пользователя просто дух захватит от этого количества файлов. Что же выбрать?</p>
<p>Всё просто для сервера выбираем ключи:<br />
ca.crt<br />
dh2048.pem<br />
ta.key<br />
my-personal-vpn-server.crt<br />
my-personal-vpn-server.key</p>
<p>Для клиента client1<br />
ca.crt<br />
ta.key<br />
my-personal-vpn-client1.crt<br />
my-personal-vpn-client1.key<br />
И так далее&#8230;</p>
<p>Чтобы расставить все точки над I приведу табличку как это было на сайте OpenVPN.</p>
<table cellspacing="0" cellpadding="8" border="1">
<tbody>
<tr>
<th><strong>Имя файла</strong></th>
<th><strong>Требуется</strong></th>
<th><strong>Назначение</strong></th>
<th><strong>Секретный</strong></th>
</tr>
<tr>
<td>ca.crt</td>
<td>серверу и всем клиентам</td>
<td>Root CA certificate</td>
<td>нет</td>
</tr>
<tr>
<td>ca.key</td>
<td>ключ требуется только для подписывания новосгенерированных ключей</td>
<td>Root CA key</td>
<td>ДА</td>
</tr>
<tr>
<td>dh2048.pem</td>
<td>только серверу</td>
<td>Diffie Hellman parameters</td>
<td>нет</td>
</tr>
<tr>
<td>ta.key</td>
<td>серверу и всем клиентам</td>
<td>HMAC firewall</td>
<td>ДА</td>
</tr>
<tr>
<td>my-personal-vpn-server.crt</td>
<td>только серверу</td>
<td>Server Certificate</td>
<td>нет</td>
</tr>
<tr>
<td>my-personal-vpn-server.key</td>
<td>только серверу</td>
<td>Server Key</td>
<td>ДА</td>
</tr>
<tr>
<td>my-personal-vpn-client1.crt</td>
<td>только клиенту client1</td>
<td>Client1 Certificate</td>
<td>нет</td>
</tr>
<tr>
<td>my-personal-vpn-client1.key</td>
<td>только клиенту client1</td>
<td>Client1 Key</td>
<td>ДА</td>
</tr>
<tr>
<td>my-personal-vpn-client2.crt</td>
<td>только клиенту client2</td>
<td>Client2 Certificate</td>
<td>нет</td>
</tr>
<tr>
<td>my-personal-vpn-client2.key</td>
<td>только клиенту client2</td>
<td>Client2 Key</td>
<td>ДА</td>
</tr>
<tr>
<td>my-personal-vpn-client3.crt</td>
<td>только клиенту client3</td>
<td>Client3 Certificate</td>
<td>нет</td>
</tr>
<tr>
<td>my-personal-vpn-client3.key</td>
<td>только клиенту client3</td>
<td>Client3 Key</td>
<td>ДА</td>
</tr>
</tbody>
</table>
<h2>Резюме</h2>
<p>кратко список команд такой:</p>
<pre class="brush: bash; title: ; notranslate" title="">[user001@m750 openvpn-easy-rsa]$ . ./vars
[user001@m750 openvpn-easy-rsa]$ ./build-ca my-personal-ca
[user001@m750 openvpn-easy-rsa]$ ./build-dh
[user001@m750 openvpn-easy-rsa]$ ./build-key-server my-personal-vpn-server
[user001@m750 openvpn-easy-rsa]$ ./build-key my-personal-vpn-client1
[user001@m750 openvpn-easy-rsa]$ ./build-key my-personal-vpn-client2
[user001@m750 openvpn-easy-rsa]$ ./build-key my-personal-vpn-client3
[user001@m750 keys]$ openvpn --genkey --secret ta.key</pre>
<p>В другой статье я опишу конфигурацию сервера и клиента чтобы они использовали полученные ключи.</p>
	</div><!-- .entry-content -->

	
	<footer class="entry-footer">
		<span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="http://youngblog.hoster-ok.com/generatsiya-rsa-klyuchej-dlya-openvpn/" rel="bookmark"><time class="entry-date published" datetime="2011-08-19T22:48:53+00:00">19.08.2011</time><time class="updated" datetime="2012-01-25T00:09:59+00:00">25.01.2012</time></a></span><span class="byline"><span class="author vcard"><span class="screen-reader-text">Author </span><a class="url fn n" href="http://youngblog.hoster-ok.com/author/admin/">admin</a></span></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="http://youngblog.hoster-ok.com/category/os/linux/" rel="category tag">Linux</a>, <a href="http://youngblog.hoster-ok.com/category/programs/sistemnoe-po/" rel="category tag">Системное ПО</a>, <a href="http://youngblog.hoster-ok.com/category/security/cryptography/" rel="category tag">шифрование</a></span><span class="tags-links"><span class="screen-reader-text">Tags </span><a href="http://youngblog.hoster-ok.com/tag/easy-rsa/" rel="tag">Easy-RSA</a>, <a href="http://youngblog.hoster-ok.com/tag/openvpn/" rel="tag">OpenVPN</a>, <a href="http://youngblog.hoster-ok.com/tag/openvpn-keys/" rel="tag">OpenVpn keys</a>, <a href="http://youngblog.hoster-ok.com/tag/rsa/" rel="tag">RSA</a>, <a href="http://youngblog.hoster-ok.com/tag/security-2/" rel="tag">security</a>, <a href="http://youngblog.hoster-ok.com/tag/vpn/" rel="tag">VPN</a></span>			</footer><!-- .entry-footer -->

</article><!-- #post-## -->

<div id="comments" class="comments-area">

	
	
		<div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/generatsiya-rsa-klyuchej-dlya-openvpn/#respond" style="display:none;">Cancel reply</a></small></h3><p class="must-log-in">You must be <a href="https://youngblog.hoster-ok.com/wp-login.php?redirect_to=http%3A%2F%2Fyoungblog.hoster-ok.com%2Fgeneratsiya-rsa-klyuchej-dlya-openvpn%2F">logged in</a> to post a comment.</p>	</div><!-- #respond -->
	
</div><!-- .comments-area -->

	<nav class="navigation post-navigation" role="navigation">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="http://youngblog.hoster-ok.com/bacula-problema-zapuska-pod-winows/" rel="prev"><span class="meta-nav" aria-hidden="true">Previous</span> <span class="screen-reader-text">Previous post:</span> <span class="post-title">Bacula проблема запуска под Winows</span></a></div><div class="nav-next"><a href="http://youngblog.hoster-ok.com/kak-sbrosit-routerboard-rb250gs-rb750-750g-k-zavodskim-nastrojkam/" rel="next"><span class="meta-nav" aria-hidden="true">Next</span> <span class="screen-reader-text">Next post:</span> <span class="post-title">Как сбросить RouterBoard RB250GS, RB750/750G к заводским настройкам.</span></a></div></div>
	</nav>
		</main><!-- .site-main -->
	</div><!-- .content-area -->


	</div><!-- .site-content -->

	<footer id="colophon" class="site-footer" role="contentinfo">
                <div yandex>
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter1049947 = new Ya.Metrika({id:1049947,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/1049947" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
                </div>
		<div class="site-info">
						<a href="https://wordpress.org/">Proudly powered by WordPress</a>
		</div><!-- .site-info -->
	</footer><!-- .site-footer -->

</div><!-- .site -->

<!-- ngg_resource_manager_marker --><script type='text/javascript' src='http://youngblog.hoster-ok.com/wp-content/plugins/contact-form-7/includes/js/jquery.form.min.js?ver=3.51.0-2014.06.20'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var _wpcf7 = {"recaptcha":{"messages":{"empty":"Please verify that you are not a robot."}}};
/* ]]> */
</script>
<script type='text/javascript' src='http://youngblog.hoster-ok.com/wp-content/plugins/contact-form-7/includes/js/scripts.js?ver=4.6'></script>
<script type='text/javascript' src='http://youngblog.hoster-ok.com/wp-content/themes/twentyfifteen/js/skip-link-focus-fix.js?ver=20141010'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var screenReaderText = {"expand":"<span class=\"screen-reader-text\">expand child menu<\/span>","collapse":"<span class=\"screen-reader-text\">collapse child menu<\/span>"};
/* ]]> */
</script>
<script type='text/javascript' src='http://youngblog.hoster-ok.com/wp-content/themes/twentyfifteen/js/functions.js?ver=20150330'></script>
<script type='text/javascript' src='http://youngblog.hoster-ok.com/wp-includes/js/wp-embed.min.js?ver=4.7.7'></script>
<script type='text/javascript' src='http://youngblog.hoster-ok.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.9b'></script>
<script type='text/javascript' src='http://youngblog.hoster-ok.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushBash.js?ver=3.0.9b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://youngblog.hoster-ok.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.9b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://youngblog.hoster-ok.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeRDark.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>

</body>
</html>
